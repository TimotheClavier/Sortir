{% extends 'base.html.twig' %}

{% block title %}Sortir.eni{% endblock %}

{% block body %}
    <div class="row my-4">
        {% for trip in trips %}
            <div class="col-lg-4 col-md-6 col-sm-12 my-2">
                <div class="card card-cascade narrower">
                    <!-- Card image -->
                    <div class="view view-cascade overlay">
                        <img class="card-img-top" src="{{ asset(trip.coverImage) }}" alt="Card image cap"
                             width="300" height="150">
                        <a href="{{ path('trip_show', { 'id': trip.id }) }}">
                            <div class="mask rgba-white-slight"></div>
                        </a>
                    </div>
                    <!-- Card content -->
                    <div class="card-body card-body-cascade">
                        <!-- Label -->
                        <div class="progress md-progress" style="height: 20px">
                            <div class="progress md-progress material-tooltip-main" style="height: 20px"
                                 data-toggle="popover-hover" title="Places disponible"
                                 data-content="Il y'a {{ trip.seat }} places pour cette Ã©venement.">
                                <div class="progress-bar bg-success" role="progressbar"
                                     style="width: {{ (trip.users|length / trip.seat * 100 ) }}%;
                                             height: 20px"
                                     aria-valuenow="{{ (trip.users|length / trip.seat * 100) }}"
                                     aria-valuemin="0" aria-valuemax="{{ trip.seat }}">
                                    {{ (trip.users|length / trip.seat * 100)|round }}%
                                </div>
                            </div>
                        </div>
                        <!-- Title -->
                        <h4 class="font-weight-bold card-title">{{ trip.name }}
                            {% if trip.organizer.id == app.user.id %}
                                <i class="fas fa-user"></i>
                            {% endif %}
                            {% if( userTrips[loop.index0].trip_id|default(null) == trip.id) %}
                                <i class="fas fa-check"></i>
                            {% endif %}
                        </h4>
                        <!-- Text -->
                        <p class="card-text text-truncate">{{ trip.description }}</p>
                        <div class="container">
                            <div class="row justify-content-between">
                                <div class="col-lg-6 col-md-12">
                                    {% if( userTrips[loop.index0].trip_id|default(null) == trip.id) %}<a
                                        class="btn btn-outline-success"
                                        href="{{ path('trip_cancel', { 'id': trip.id }) }}"><i
                                                class="fas fa-calendar-times"></i></a>{% else %}
                                        {% if trip.inscriptionDate > date %}<a class="btn btn-outline-success"
                                                                               href="{{ path('trip_registration', { 'id': trip.id }) }}">
                                                <i class="fas fa-calendar-check"></i></a>{% endif %}{% endif %}
                                </div>
                                <div class="col-lg-6 col-sm-12">
                                    {% if date(trip.inscriptionDate) > date() %}
                                        <a class="btn btn-success" href="{{ path('trip_show', { 'id': trip.id }) }}">Voir</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    <div class="row justify-content-center my-3">
        <nav class="Page navigation">
            <ul class="pagination pg-teal pagination-circle">
                <li class="page-item">
                    <a class="page-link" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                <li class="page-item active"><a class="page-link">1</a></li>
                <li class="page-item"><a class="page-link">2</a></li>
                <li class="page-item"><a class="page-link">3</a></li>
                <li class="page-item"><a class="page-link">4</a></li>
                <li class="page-item"><a class="page-link">5</a></li>
                <li class="page-item">
                    <a class="page-link" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
{% endblock %}

